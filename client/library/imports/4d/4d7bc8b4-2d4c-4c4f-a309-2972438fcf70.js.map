{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [],
  "mappings": "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",
  "file": "unknown",
  "sourcesContent": [
    "cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        HistoryItemPrefab:{\r\n            default:null,\r\n            type:cc.Prefab,\r\n        },\r\n        // foo: {\r\n        //    default: null,\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n        _history:null,\r\n        _viewlist:null,\r\n        _content:null,\r\n        _viewitemTemp:null,\r\n        _historyData:null,\r\n        _curRoomInfo:null,\r\n        _emptyTip:null,\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        this._history = this.node.getChildByName(\"history\");\r\n        this._history.active = false;\r\n        \r\n        this._emptyTip = this._history.getChildByName(\"emptyTip\");\r\n        this._emptyTip.active = true;\r\n        \r\n        this._viewlist = this._history.getChildByName(\"viewlist\");\r\n        this._content = cc.find(\"view/content\",this._viewlist);\r\n        \r\n        this._viewitemTemp = this._content.children[0];\r\n        this._content.removeChild(this._viewitemTemp);\r\n\r\n        var node = cc.find(\"Canvas/btn_zhanji\");        \r\n        this.addClickEvent(node,this.node,\"History\",\"onBtnHistoryClicked\");\r\n        \r\n        var node = cc.find(\"Canvas/history/btn_back\");  \r\n        this.addClickEvent(node,this.node,\"History\",\"onBtnBackClicked\");\r\n    },\r\n    \r\n    addClickEvent:function(node,target,component,handler){\r\n        var eventHandler = new cc.Component.EventHandler();\r\n        eventHandler.target = target;\r\n        eventHandler.component = component;\r\n        eventHandler.handler = handler;\r\n\r\n        var clickEvents = node.getComponent(cc.Button).clickEvents;\r\n        clickEvents.push(eventHandler);\r\n    },\r\n    \r\n    onBtnBackClicked:function(){\r\n        if(this._curRoomInfo == null){\r\n            this._historyData = null;\r\n            this._history.active = false;            \r\n        }\r\n        else{\r\n            this.initRoomHistoryList(this._historyData);   \r\n        }\r\n    },\r\n    \r\n    onBtnHistoryClicked:function(){\r\n        this._history.active = true;\r\n        var self = this;\r\n        cc.vv.userMgr.getHistoryList(function(data){\r\n            data.sort(function(a,b){\r\n                return a.time < b.time; \r\n            });\r\n            self._historyData = data;\r\n            for(var i = 0; i < data.length; ++i){\r\n                for(var j = 0; j < 4; ++j){\r\n                    var s = data[i].seats[j];\r\n                    s.name = new Buffer(s.name,'base64').toString();\r\n                }\r\n            }\r\n            self.initRoomHistoryList(data);\r\n        });\r\n    },\r\n    \r\n    dateFormat:function(time){\r\n        var date = new Date(time);\r\n        var datetime = \"{0}-{1}-{2} {3}:{4}:{5}\";\r\n        var year = date.getFullYear();\r\n        var month = date.getMonth() + 1;\r\n        month = month >= 10? month : (\"0\"+month);\r\n        var day = date.getDate();\r\n        day = day >= 10? day : (\"0\"+day);\r\n        var h = date.getHours();\r\n        h = h >= 10? h : (\"0\"+h);\r\n        var m = date.getMinutes();\r\n        m = m >= 10? m : (\"0\"+m);\r\n        var s = date.getSeconds();\r\n        s = s >= 10? s : (\"0\"+s);\r\n        datetime = datetime.format(year,month,day,h,m,s);\r\n        return datetime;\r\n    },\r\n    \r\n    initRoomHistoryList:function(data){\r\n        for(var i = 0; i < data.length; ++i){\r\n            var node = this.getViewItem(i);\r\n            node.idx = i;\r\n            var titleId = \"\" + (i + 1);\r\n            node.getChildByName(\"title\").getComponent(cc.Label).string = titleId;\r\n            node.getChildByName(\"roomNo\").getComponent(cc.Label).string = \"房间ID:\" + data[i].id;\r\n            var datetime = this.dateFormat(data[i].time * 1000);\r\n            node.getChildByName(\"time\").getComponent(cc.Label).string = datetime;\r\n            \r\n            var btnOp = node.getChildByName(\"btnOp\");\r\n            btnOp.idx = i;\r\n            btnOp.getChildByName(\"Label\").getComponent(cc.Label).string = \"详情\";\r\n            \r\n            for(var j = 0; j < 4; ++j){\r\n                var s = data[i].seats[j];\r\n                var info = s.name + \":\" +  s.score;\r\n                //console.log(info);\r\n                node.getChildByName(\"info\" + j).getComponent(cc.Label).string = info;\r\n            }\r\n        }\r\n        this._emptyTip.active = data.length == 0;\r\n        this.shrinkContent(data.length);\r\n        this._curRoomInfo = null;\r\n    },\r\n    \r\n    initGameHistoryList:function(roomInfo,data){\r\n        data.sort(function(a,b){\r\n           return a.create_time < b.create_time; \r\n        });\r\n        for(var i = 0; i < data.length; ++i){\r\n            var node = this.getViewItem(i);\r\n            var idx = data.length - i - 1;\r\n            node.idx = idx;\r\n            var titleId = \"\" + (idx + 1);\r\n            node.getChildByName(\"title\").getComponent(cc.Label).string = titleId;\r\n            node.getChildByName(\"roomNo\").getComponent(cc.Label).string = \"房间ID:\" + roomInfo.id;\r\n            var datetime = this.dateFormat(data[i].create_time * 1000);\r\n            node.getChildByName(\"time\").getComponent(cc.Label).string = datetime;\r\n            \r\n            var btnOp = node.getChildByName(\"btnOp\");\r\n            btnOp.idx = idx; \r\n            btnOp.getChildByName(\"Label\").getComponent(cc.Label).string = \"回放\";\r\n            \r\n            var result = JSON.parse(data[i].result);\r\n            for(var j = 0; j < 4; ++j){\r\n                var s = roomInfo.seats[j];\r\n                var info = s.name + \":\" + result[j];\r\n                //console.log(info);\r\n                node.getChildByName(\"info\" + j).getComponent(cc.Label).string = info;\r\n            }\r\n        }\r\n        this.shrinkContent(data.length);\r\n        this._curRoomInfo = roomInfo;\r\n    },\r\n    \r\n    getViewItem:function(index){\r\n        var content = this._content;\r\n        if(content.childrenCount > index){\r\n            return content.children[index];\r\n        }\r\n        var node = cc.instantiate(this._viewitemTemp);\r\n        content.addChild(node);\r\n        return node;\r\n    },\r\n    shrinkContent:function(num){\r\n        while(this._content.childrenCount > num){\r\n            var lastOne = this._content.children[this._content.childrenCount -1];\r\n            this._content.removeChild(lastOne,true);\r\n        }\r\n    },\r\n    \r\n    getGameListOfRoom:function(idx){\r\n        var self = this;\r\n        var roomInfo = this._historyData[idx];        \r\n        cc.vv.userMgr.getGamesOfRoom(roomInfo.uuid,function(data){\r\n            if(data != null && data.length > 0){\r\n                self.initGameHistoryList(roomInfo,data);\r\n            }\r\n        });\r\n    },\r\n    \r\n    getDetailOfGame:function(idx){\r\n        var self = this;\r\n        var roomUUID = this._curRoomInfo.uuid;\r\n        cc.vv.userMgr.getDetailOfGame(roomUUID,idx,function(data){\r\n            data.base_info = JSON.parse(data.base_info);\r\n            data.action_records = JSON.parse(data.action_records);\r\n            cc.vv.gameNetMgr.prepareReplay(self._curRoomInfo,data);\r\n            cc.vv.replayMgr.init(data);\r\n            cc.director.loadScene(\"mjgame\"); \r\n        });\r\n    },\r\n    \r\n    onViewItemClicked:function(event){\r\n        var idx = event.target.idx;\r\n        console.log(idx);\r\n        if(this._curRoomInfo == null){\r\n            this.getGameListOfRoom(idx);\r\n        }\r\n        else{\r\n            this.getDetailOfGame(idx);      \r\n        }\r\n    },\r\n    \r\n    onBtnOpClicked:function(event){\r\n        var idx = event.target.parent.idx;\r\n        console.log(idx);\r\n        if(this._curRoomInfo == null){\r\n            this.getGameListOfRoom(idx);\r\n        }\r\n        else{\r\n            this.getDetailOfGame(idx);      \r\n        }\r\n    },\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"
  ]
}