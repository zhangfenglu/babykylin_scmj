{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [],
  "mappings": "AAAA,SAAS,QAAQ,GAAE;AACf,QAAI,MAAM,GAAG,EAAE,CAAC;AAChB,QAAG,MAAM,CAAC,QAAQ,IAAI,IAAI,EAAC;AACvB,eAAO,MAAM,CAAC;KACjB;AACD,QAAI,IAAI,EAAC,KAAK,CAAC;AACf,QAAI,GAAG,GAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC;AAC7B,QAAI,GAAG,GAAC,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,CAAA;AACxB,OAAG,GAAC,GAAG,CAAC,MAAM,CAAC,GAAG,GAAC,CAAC,CAAC,CAAC;;AAEtB,QAAI,GAAG,GAAC,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;AACvB,SAAI,IAAI,CAAC,GAAC,CAAC,EAAC,CAAC,GAAG,GAAG,CAAC,MAAM,EAAC,CAAC,EAAE,EAAC;AAC3B,WAAG,GAAC,GAAG,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;AACxB,YAAG,GAAG,GAAC,CAAC,EAAC;AACL,gBAAI,GAAC,GAAG,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,EAAC,GAAG,CAAC,CAAC;AAC7B,iBAAK,GAAC,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,GAAG,GAAC,CAAC,CAAC,CAAC;AAC3B,kBAAM,CAAC,IAAI,CAAC,GAAC,KAAK,CAAC;SACtB;KACJ;AACD,WAAO,MAAM,CAAC;CACjB;;AAED,SAAS,OAAO,GAAE;AACd,MAAE,CAAC,EAAE,GAAG,EAAE,CAAC;AACX,QAAI,OAAO,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC;AACjC,MAAE,CAAC,EAAE,CAAC,OAAO,GAAG,IAAI,OAAO,EAAE,CAAC;;AAE9B,QAAI,SAAS,GAAG,OAAO,CAAC,WAAW,CAAC,CAAC;AACrC,MAAE,CAAC,EAAE,CAAC,SAAS,GAAG,IAAI,SAAS,EAAE,CAAC;;AAElC,MAAE,CAAC,EAAE,CAAC,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC;AAC7B,MAAE,CAAC,EAAE,CAAC,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AACjC,MAAE,CAAC,EAAE,CAAC,GAAG,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC;;AAE3B,QAAI,UAAU,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC;AACvC,MAAE,CAAC,EAAE,CAAC,UAAU,GAAG,IAAI,UAAU,EAAE,CAAC;AACpC,MAAE,CAAC,EAAE,CAAC,UAAU,CAAC,YAAY,EAAE,CAAC;;AAEhC,QAAI,SAAS,GAAG,OAAO,CAAC,WAAW,CAAC,CAAC;AACrC,MAAE,CAAC,EAAE,CAAC,SAAS,GAAG,IAAI,SAAS,EAAE,CAAC;AAClC,MAAE,CAAC,EAAE,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC;;AAEvB,QAAI,QAAQ,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;AACnC,MAAE,CAAC,EAAE,CAAC,QAAQ,GAAG,IAAI,QAAQ,EAAE,CAAC;AAChC,MAAE,CAAC,EAAE,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;;AAEtB,QAAI,QAAQ,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;AACnC,MAAE,CAAC,EAAE,CAAC,QAAQ,GAAG,IAAI,QAAQ,EAAE,CAAC;AAChC,MAAE,CAAC,EAAE,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;;AAEtB,QAAI,KAAK,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC;AAC7B,MAAE,CAAC,EAAE,CAAC,KAAK,GAAG,IAAI,KAAK,EAAE,CAAC;;;;;AAK1B,MAAE,CAAC,IAAI,GAAG,QAAQ,EAAE,CAAC;CACxB;;AAID,EAAE,CAAC,KAAK,CAAC;AACL,eAAS,EAAE,CAAC,SAAS;;AAErB,cAAU,EAAE;;;;;;;;;;;;AAYR,sBAAc,EAAC,EAAE,CAAC,KAAK;KAC1B;;;AAGD,UAAM,EAAE,kBAAY;AAChB,YAAG,CAAC,EAAE,CAAC,GAAG,CAAC,QAAQ,IAAI,EAAE,CAAC,GAAG,CAAC,QAAQ,EAAC;AACnC,gBAAI,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC;AAC5C,eAAG,CAAC,SAAS,GAAG,IAAI,CAAC;AACrB,eAAG,CAAC,QAAQ,GAAG,IAAI,CAAC;SACvB;AACD,eAAO,EAAE,CAAC;AACV,eAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;AACpB,YAAI,CAAC,UAAU,GAAG,SAAS,CAAC;;AAE5B,YAAI,CAAC,UAAU,CAAC,CAAA,YAAU;;AAEtB,gBAAI,GAAG,GAAG,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,sBAAsB,CAAC,CAAC;AAC7C,cAAE,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,EAAC,CAAA,UAAS,GAAG,EAAC,IAAI,EAAC;AACjC,kBAAE,CAAC,OAAO,GAAG,IAAI,CAAC;AAClB,uBAAO,CAAC,GAAG,CAAC,uBAAuB,GAAG,EAAE,CAAC,OAAO,CAAC,CAAC;AAClD,oBAAI,CAAC,aAAa,EAAE,CAAC;aACxB,CAAA,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;SACjB,CAAA,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;KACjB;;AAED,wBAAoB,EAAC,gCAAU;AAC3B,UAAE,CAAC,GAAG,CAAC,OAAO,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC;KACnC;;AAED,cAAU,EAAC,oBAAS,QAAQ,EAAC;AACzB,YAAI,IAAI,GAAG,IAAI,CAAC;AAChB,YAAI,SAAS,GAAG,IAAI,CAAC;AACrB,YAAI,SAAS,GAAG,GAAG,CAAC;AACpB,YAAI,CAAC,OAAO,GAAG,EAAE,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;AACxC,YAAG,IAAI,IAAI,EAAE,CAAC,GAAG,CAAC,EAAE,IAAI,EAAE,CAAC,GAAG,CAAC,MAAM,IAAI,CAAC,EAAE,CAAC,GAAG,CAAC,QAAQ,EAAC;AACtD,gBAAI,CAAC,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC;AAC3B,gBAAG,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,WAAW,IAAI,IAAI,EAAC;AACxD,wBAAQ,EAAE,CAAC;AACX,uBAAO;aACV;AACD,gBAAI,CAAC,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;AACnB,gBAAI,EAAE,GAAG,SAAL,EAAE,GAAa;AACf,oBAAI,EAAE,GAAG,IAAI,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;AACxB,oBAAG,EAAE,GAAG,SAAS,EAAC;AACd,8BAAU,CAAC,EAAE,EAAC,EAAE,CAAC,CAAC;iBACrB,MACI;AACD,wBAAI,EAAE,GAAG,CAAC,CAAC,GAAI,CAAC,EAAE,GAAG,SAAS,CAAA,GAAI,SAAS,CAAC,GAAI,GAAG,CAAC;AACpD,wBAAG,EAAE,GAAG,CAAC,EAAC;AACN,4BAAI,CAAC,OAAO,CAAC,OAAO,GAAG,CAAC,CAAC;AACzB,gCAAQ,EAAE,CAAC;qBACd,MACG;AACA,4BAAI,CAAC,OAAO,CAAC,OAAO,GAAG,EAAE,CAAC;AAC1B,kCAAU,CAAC,EAAE,EAAC,EAAE,CAAC,CAAC;qBACrB;iBACJ;aACJ,CAAC;AACF,sBAAU,CAAC,EAAE,EAAC,EAAE,CAAC,CAAC;SACrB,MACG;AACA,gBAAI,CAAC,OAAO,CAAC,MAAM,GAAG,KAAK,CAAC;AAC5B,oBAAQ,EAAE,CAAC;SACd;KACJ;;AAED,iBAAa,EAAC,yBAAU;AACpB,YAAI,IAAI,GAAG,IAAI,CAAC;AAChB,YAAI,YAAY,GAAG,SAAf,YAAY,CAAY,GAAG,EAAC;AAC5B,gBAAG,GAAG,CAAC,OAAO,IAAI,IAAI,EAAC;AACnB,uBAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;aACzB,MACG;AACA,kBAAE,CAAC,EAAE,CAAC,EAAE,GAAG,GAAG,CAAC;AACf,oBAAG,GAAG,CAAC,OAAO,IAAI,EAAE,CAAC,OAAO,EAAC;AACzB,sBAAE,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,MAAM,GAAG,IAAI,CAAC;iBACzC,MACG;AACA,sBAAE,CAAC,QAAQ,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;iBAC1C;aACJ;SACJ,CAAC;;AAEF,YAAI,GAAG,GAAG,IAAI,CAAC;AACf,YAAI,QAAQ,GAAG,KAAK,CAAC;AACrB,YAAI,SAAS,GAAG,SAAZ,SAAS,GAAa;AACtB,gBAAI,CAAC,cAAc,CAAC,MAAM,GAAG,SAAS,CAAC;AACvC,eAAG,GAAG,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,WAAW,CAAC,iBAAiB,EAAC,IAAI,EAAC,UAAS,GAAG,EAAC;AAC7D,mBAAG,GAAG,IAAI,CAAC;AACX,wBAAQ,GAAG,IAAI,CAAC;AAChB,4BAAY,CAAC,GAAG,CAAC,CAAC;aACrB,CAAC,CAAC;AACH,sBAAU,CAAC,EAAE,EAAC,IAAI,CAAC,CAAC;SACvB,CAAA;;AAED,YAAI,EAAE,GAAG,SAAL,EAAE,GAAa;AACf,gBAAG,CAAC,QAAQ,EAAC;AACT,oBAAG,GAAG,EAAC;AACH,uBAAG,CAAC,KAAK,EAAE,CAAC;AACZ,wBAAI,CAAC,cAAc,CAAC,MAAM,GAAG,WAAW,CAAC;AACzC,8BAAU,CAAC,YAAU;AACjB,iCAAS,EAAE,CAAC;qBACf,EAAC,IAAI,CAAC,CAAC;iBACX,MACG;AACA,6BAAS,EAAE,CAAC;iBACf;aACJ;SACJ,CAAC;AACF,UAAE,EAAE,CAAC;KACR;CACJ,CAAC,CAAC",
  "file": "unknown",
  "sourcesContent": [
    "function urlParse(){\r\n    var params = {};\r\n    if(window.location == null){\r\n        return params;\r\n    }\r\n    var name,value; \r\n    var str=window.location.href; //取得整个地址栏\r\n    var num=str.indexOf(\"?\") \r\n    str=str.substr(num+1); //取得所有参数   stringvar.substr(start [, length ]\r\n\r\n    var arr=str.split(\"&\"); //各个参数放到数组里\r\n    for(var i=0;i < arr.length;i++){ \r\n        num=arr[i].indexOf(\"=\"); \r\n        if(num>0){ \r\n            name=arr[i].substring(0,num);\r\n            value=arr[i].substr(num+1);\r\n            params[name]=value;\r\n        } \r\n    }\r\n    return params;\r\n}\r\n\r\nfunction initMgr(){\r\n    cc.vv = {};\r\n    var UserMgr = require(\"UserMgr\");\r\n    cc.vv.userMgr = new UserMgr();\r\n    \r\n    var ReplayMgr = require(\"ReplayMgr\");\r\n    cc.vv.replayMgr = new ReplayMgr();\r\n    \r\n    cc.vv.http = require(\"HTTP\");\r\n    cc.vv.global = require(\"Global\");\r\n    cc.vv.net = require(\"Net\");\r\n    \r\n    var GameNetMgr = require(\"GameNetMgr\");\r\n    cc.vv.gameNetMgr = new GameNetMgr();\r\n    cc.vv.gameNetMgr.initHandlers();\r\n    \r\n    var AnysdkMgr = require(\"AnysdkMgr\");\r\n    cc.vv.anysdkMgr = new AnysdkMgr();\r\n    cc.vv.anysdkMgr.init();\r\n    \r\n    var VoiceMgr = require(\"VoiceMgr\");\r\n    cc.vv.voiceMgr = new VoiceMgr();\r\n    cc.vv.voiceMgr.init();\r\n    \r\n    var AudioMgr = require(\"AudioMgr\");\r\n    cc.vv.audioMgr = new AudioMgr();\r\n    cc.vv.audioMgr.init();\r\n    \r\n    var Utils = require(\"Utils\");\r\n    cc.vv.utils = new Utils();\r\n    \r\n    //var MJUtil = require(\"MJUtil\");\r\n    //cc.vv.mjutil = new MJUtil();\r\n    \r\n    cc.args = urlParse();\r\n}\r\n    \r\n\r\n    \r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //    default: null,      // The default value will be used only when the component attaching\r\n        //                           to a node for the first time\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n\r\n        loadingProgess:cc.Label,\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        if(!cc.sys.isNative && cc.sys.isMobile){\r\n            var cvs = this.node.getComponent(cc.Canvas);\r\n            cvs.fitHeight = true;\r\n            cvs.fitWidth = true;\r\n        }\r\n        initMgr();\r\n        console.log('haha'); \r\n        this._mainScene = 'loading';\r\n        //先执行闪屏 然后 再去请求服务器的 版本与本地版本进行比对\r\n        this.showSplash(function(){\r\n            //url = F:/youlin/client/assets/resources/ver/cv.txt\r\n            var url = cc.url.raw('resources/ver/cv.txt');\r\n            cc.loader.load(url,function(err,data){\r\n                cc.VERSION = data;\r\n                console.log('current core version:' + cc.VERSION);\r\n                this.getServerInfo();\r\n            }.bind(this));\r\n        }.bind(this));\r\n    },\r\n\r\n    onBtnDownloadClicked:function(){\r\n        cc.sys.openURL(cc.vv.SI.appweb);\r\n    },\r\n    \r\n    showSplash:function(callback){\r\n        var self = this;\r\n        var SHOW_TIME = 3000;\r\n        var FADE_TIME = 500;\r\n        this._splash = cc.find(\"Canvas/splash\");\r\n        if(true || cc.sys.os != cc.sys.OS_IOS || !cc.sys.isNative){\r\n            this._splash.active = true;\r\n            if(this._splash.getComponent(cc.Sprite).spriteFrame == null){\r\n                callback();\r\n                return;\r\n            }\r\n            var t = Date.now();\r\n            var fn = function(){\r\n                var dt = Date.now() - t;\r\n                if(dt < SHOW_TIME){\r\n                    setTimeout(fn,33);\r\n                }\r\n                else {\r\n                    var op = (1 - ((dt - SHOW_TIME) / FADE_TIME)) * 255;\r\n                    if(op < 0){\r\n                        self._splash.opacity = 0;\r\n                        callback();   \r\n                    }\r\n                    else{\r\n                        self._splash.opacity = op;\r\n                        setTimeout(fn,33);   \r\n                    }\r\n                }\r\n            };\r\n            setTimeout(fn,33);\r\n        }\r\n        else{\r\n            this._splash.active = false;\r\n            callback();\r\n        }\r\n    },\r\n    \r\n    getServerInfo:function(){\r\n        var self = this;\r\n        var onGetVersion = function(ret){\r\n            if(ret.version == null){\r\n                console.log(\"error.\");\r\n            }\r\n            else{\r\n                cc.vv.SI = ret;\r\n                if(ret.version != cc.VERSION){\r\n                    cc.find(\"Canvas/alert\").active = true;\r\n                }\r\n                else{\r\n                    cc.director.loadScene(self._mainScene);\r\n                }\r\n            }\r\n        };\r\n        \r\n        var xhr = null;\r\n        var complete = false;\r\n        var fnRequest = function(){\r\n            self.loadingProgess.string = \"正在连接服务器\";\r\n            xhr = cc.vv.http.sendRequest(\"/get_serverinfo\",null,function(ret){\r\n                xhr = null;\r\n                complete = true;\r\n                onGetVersion(ret);\r\n            });\r\n            setTimeout(fn,5000);            \r\n        }\r\n        \r\n        var fn = function(){\r\n            if(!complete){\r\n                if(xhr){\r\n                    xhr.abort();\r\n                    self.loadingProgess.string = \"连接失败，即将重试\";\r\n                    setTimeout(function(){\r\n                        fnRequest();\r\n                    },5000);\r\n                }\r\n                else{\r\n                    fnRequest();\r\n                }\r\n            }\r\n        };\r\n        fn();\r\n    }\r\n});\r\n"
  ]
}