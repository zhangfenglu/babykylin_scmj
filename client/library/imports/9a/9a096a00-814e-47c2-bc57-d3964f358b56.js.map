{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [],
  "mappings": "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",
  "file": "unknown",
  "sourcesContent": [
    "cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //    default: null,      // The default value will be used only when the component attaching\r\n        //                           to a node for the first time\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n        _huanpaitip:null,\r\n        _huanpaiArr:[]\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        this._huanpaitip = cc.find(\"Canvas/huansanzhang\");\r\n        this._huanpaitip.active = cc.vv.gameNetMgr.isHuanSanZhang;\r\n        \r\n        if(this._huanpaitip.active){\r\n            this.showHuanpai(cc.vv.gameNetMgr.getSelfData().huanpais == null);\r\n        }\r\n        this.initHuaipaiInfo();\r\n        \r\n        var btnOk = cc.find(\"Canvas/huansanzhang/btn_ok\");\r\n        if(btnOk){\r\n            cc.vv.utils.addClickEvent(btnOk,this.node,\"HuanSanZhang\",\"onHuanSanZhang\");\r\n        }\r\n        \r\n        var self = this;\r\n        this.node.on('game_begin',function(data){\r\n            self.initHuaipaiInfo();\r\n        });\r\n        \r\n        this.node.on('game_huanpai',function(data){\r\n           self._huanpaitip.active = true;\r\n           self.showHuanpai(true);\r\n        });\r\n        \r\n        this.node.on('huanpai_notify',function(data){\r\n            if(data.detail.seatindex == cc.vv.gameNetMgr.seatIndex){\r\n                self.initHuaipaiInfo();   \r\n            }\r\n        });\r\n        \r\n        this.node.on('game_huanpai_over',function(data){\r\n            self._huanpaitip.active = false;\r\n            for(var i = 0; i < self._huanpaiArr.length; ++i){\r\n                self._huanpaiArr[i].y = 0;\r\n            }\r\n            self._huanpaiArr = [];\r\n            self.initHuaipaiInfo();\r\n        });\r\n        \r\n        this.node.on('game_huanpai_result',function(data){\r\n            cc.vv.gameNetMgr.isHuanSanZhang = false;\r\n            self._huanpaitip.active = false;\r\n            for(var i = 0; i < self._huanpaiArr.length; ++i){\r\n                self._huanpaiArr[i].y = 0;\r\n            }\r\n            self._huanpaiArr = [];\r\n        });\r\n        \r\n        this.node.on('mj_clicked',function(data){\r\n            var target = data.detail;\r\n            //如果已经点起来，则取消\r\n            var idx = self._huanpaiArr.indexOf(target); \r\n            if(idx != -1){\r\n                target.y = 0;\r\n                self._huanpaiArr.splice(idx,1);\r\n            }\r\n            else{\r\n                //如果是新的，则加入\r\n                if(self._huanpaiArr.length < 3){\r\n                    self._huanpaiArr.push(target);\r\n                    target.y = 15;\r\n                }\r\n            } \r\n        });\r\n    },\r\n    \r\n    showHuanpai:function(interactable){\r\n        this._huanpaitip.getChildByName(\"info\").getComponent(cc.Label).string = interactable? \"请选择三张一样花色的牌\":\"等待其他玩家选牌...\";\r\n        this._huanpaitip.getChildByName(\"btn_ok\").getComponent(cc.Button).interactable = interactable;\r\n        this._huanpaitip.getChildByName(\"mask\").active = false;        \r\n    },\r\n    \r\n    initHuaipaiInfo:function(){\r\n        var huaipaiinfo = cc.find(\"Canvas/game/huanpaiinfo\");\r\n        var seat = cc.vv.gameNetMgr.getSelfData();\r\n        if(seat.huanpais == null){\r\n            huaipaiinfo.active = false;\r\n            return;\r\n        }\r\n        huaipaiinfo.active = true;\r\n        for(var i = 0; i < seat.huanpais.length; ++i){\r\n            huaipaiinfo.getChildByName(\"hp\" + (i + 1)).getComponent(cc.Sprite).spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\",seat.huanpais[i]);\r\n        }\r\n        \r\n        var hpm = huaipaiinfo.getChildByName(\"hpm\");\r\n        hpm.active = true;\r\n        if(cc.vv.gameNetMgr.huanpaimethod == 0){\r\n            hpm.rotation = 90;\r\n        }\r\n        else if(cc.vv.gameNetMgr.huanpaimethod == 1){\r\n            hpm.rotation = 0;\r\n        }\r\n        else if(cc.vv.gameNetMgr.huanpaimethod == 2){\r\n            hpm.rotation = 180;\r\n        }\r\n        else{\r\n            hpm.active = false;\r\n        }\r\n    },\r\n    \r\n    onHuanSanZhang:function(event){\r\n        if(this._huanpaiArr.length != 3){\r\n            return;\r\n        }\r\n        \r\n        var type = null;\r\n        for(var i = 0; i < this._huanpaiArr.length; ++i){\r\n            var pai = this._huanpaiArr[i].mjId;\r\n            var nt = cc.vv.mahjongmgr.getMahjongType(pai); \r\n            if(type == null){\r\n                type = nt;\r\n            }\r\n            else{\r\n                if(type != nt){\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n        \r\n        var data = {\r\n            p1:this._huanpaiArr[0].mjId,\r\n            p2:this._huanpaiArr[1].mjId,\r\n            p3:this._huanpaiArr[2].mjId,\r\n        }\r\n        \r\n        this._huanpaitip.getChildByName(\"info\").getComponent(cc.Label).string = \"等待其他玩家选牌...\";\r\n        this._huanpaitip.getChildByName(\"btn_ok\").getComponent(cc.Button).interactable = false;\r\n        this._huanpaitip.getChildByName(\"mask\").active = true;\r\n        \r\n        cc.vv.net.send(\"huanpai\",data);\r\n    },\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"
  ]
}